## TASK 1.3.6 [задание на stepik](https://stepik.org/lesson/297515/step/6?unit=279275)
Вывести  цену самой дешевой книги, цену самой дорогой и среднюю цену уникальных книг на складе. 
Названия столбцов Минимальная_цена, Максимальная_цена, Средняя_цена соответственно. Среднюю цену округлить до двух знаков после запятой.

**Пояснение**. В задании нужно посчитать среднюю цену уникальных книг на складе, а не среднюю цену всех экземпляров книг.

**Решение:**

```SQl
SELECT
   MIN(price) AS Минимальная_цена,
   MAX(price) AS Максимальная_цена,
   ROUND(AVG(DISTINCT price),2) AS Средняя_цена
FROM book;
```

**Перевод на человеческий:**

```SQL
/*выбери
   минимальное значение цены в столбце price, назови новый результирующий столбец  как Минимальная_цена
   максимальное значение цены в столбце price, назови новый результирующий столбец  как Максимальная_цена
   уникальные значения цен в столбце price, посчитай их среднее значение, округли до 2-х знаков после запятой,
назови новый результирующий столбец  как Средняя_цена*/
/*из таблицы book*/
```

**Результат:**

```SQL
+------------------+-------------------+--------------+
| Минимальная_цена | Максимальная_цена | Средняя_цена |
+------------------+-------------------+--------------+
| 460.00           | 799.01            | 600.17       |
+------------------+-------------------+--------------+
Affected rows: 1
```

**Пояснение:**

- для выбора цены самой дешевой книги используем оператор ```MIN()```, который выберет минимальное значение в столбце **price**,
новый результирующий столбец называем Минимальная_цена с помощью оператора ```AS```
- для выбора цены самой дорогой книги используем оператор ```MAX()```, который выберет максимальное значение в столбце **price**,
новый результирующий столбец называем Максимальная_цена с помощью оператора ```AS```
- для выбора средней цены уникальных книг сначала выберем все уникальные цены в столбце **price** (уберём все дубликаты)
с помощью оператора ```DISTINCT```, затем посчитаем среднее значение цен в получившемся наборе уникальных значений с помощью оператора ```AVG```,
округлим вычисления до 2-х знаков после запятой, новый результирующий столбец называем Средняя_цена с помощью оператора ```AS```

В данном задании уникальные значения выбираем по цене, так как в результирующий набор войдут вычисления по столбцу **price**.
Честно говоря, в этом задании вообще не очень уместен выбор уникальных значений, так как в таблице и так все значения уникальные.
И в реальной жизни мы выбираем уникальность книги не только по цене, а по сочетанию разных параметров: Атор, Название, Цена.

Понравился комментарий к заданию одного из студентов курса Никиты Золотова:

>К примеру, бывают книги в твёрдом переплёте и мягком, обе они называются одинаково, но цена разная и это разные книги,
>придётся как-то определять понятие уникальности, например по цене.
>Может быть и другой случай, книги имеют одно название и одну цену, например "Сборник стихов" за 200 рублей и ещё один "Сборник стихов" за 200 рублей,
>вроде бы книги одинаковые, и то сборник и это, оба стихи оба за одну цену, но у одного сборника автор Маяковский а у другого -
>Есенин, значит это уже разные книги и отличить их можно только по автору.

Вывод: определение уникальности - дело непростое и надо понимать по какому параметру нужна эта уникальность.
