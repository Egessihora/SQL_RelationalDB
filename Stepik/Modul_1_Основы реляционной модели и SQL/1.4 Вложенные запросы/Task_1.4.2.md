## TASK 1.4.2 [–∑–∞–¥–∞–Ω–∏–µ –Ω–∞ stepik](https://stepik.org/lesson/297514/step/2?unit=279274)
–í—ã–≤–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–∞–≤—Ç–æ—Ä–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ü–µ–Ω—É) –æ  –∫–Ω–∏–≥–∞—Ö, —Ü–µ–Ω—ã –∫–æ—Ç–æ—Ä—ã—Ö –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω—ã —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω–µ –∫–Ω–∏–≥ –Ω–∞ —Å–∫–ª–∞–¥–µ.
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤—ã–≤–µ—Å—Ç–∏ –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Ü–µ–Ω—ã –≤–∏–¥–µ. –°—Ä–µ–¥–Ω–µ–µ –≤—ã—á–∏—Å–ª–∏—Ç—å –∫–∞–∫ —Å—Ä–µ–¥–Ω–µ–µ –ø–æ —Ü–µ–Ω–µ –∫–Ω–∏–≥–∏.

**–†–µ—à–µ–Ω–∏–µ**:

```SQL
SELECT author, title, price                       /*–≤—ã–±–µ—Ä–∏ —Å—Ç–æ–ª–±—Ü—ã author, title, price*/
FROM book                                         /*–∏–∑ —Ç–∞–±–ª–∏—Ü—ã book*/
WHERE price <=  (                                 /*–≤—ã–±–µ—Ä–∏ —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–æ–ª–±—Ü–∞ price <= —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞*/
                SELECT ROUND(AVG(price),2)        /*–≤—ã—á–∏—Å–ª–∏ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å—Ç–æ–ª–±—Ü–µ price –∏ –æ–∫—Ä—É–≥–ª–∏ –µ–≥–æ –¥–æ 2-—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π*/
                FROM book                         /*–∏–∑ —Ç–∞–ª–∏—Ü—ã book*/
                )
ORDER BY price DESC;                              /*–æ—Ç—Å–æ—Ä—Ç–∏—Ä—É–π –ø–æ —Å—Ç–æ–ª–±—Ü—É price –≤ –ø–æ—Ä—è–¥–∫–µ —É–±—ã–≤–∞–Ω–∏—è*/
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:

```SQL
+------------------+---------------+--------+
| author           | title         | price  |
+------------------+---------------+--------+
| –ë—É–ª–≥–∞–∫–æ–≤ –ú.–ê.    | –ë–µ–ª–∞—è –≥–≤–∞—Ä–¥–∏—è | 540.50 |
| –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | –ò–≥—Ä–æ–∫         | 480.50 |
| –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | –ò–¥–∏–æ—Ç         | 460.00 |
+------------------+---------------+--------+
Affected rows: 3
```

**–ü–æ—è—Å–Ω–µ–Ω–∏—è:**

- –≤ –¥–∞–Ω–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –º—ã –¥–æ–ª–∂–Ω—ã —Å—Ä–∞–≤–Ω–∏—Ç—å –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ (—Ç–æ—á–Ω–µ–µ –ø–æ–ø—Ä–æ—Å–∏—Ç—å —Å–µ—Ä–≤–µ—Ä —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ ü•∫) –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –≤ —Å—Ç–æ–ª–±—Ü–µ **price** —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º,
–∫–æ—Ç–æ—Ä—ã–µ –º—ã –ø–æ–ª—É—á–∏–º –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É –≤–∑—è—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ü–µ–Ω–∞ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑
–≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –≤–æ –≤–ª–æ–∂–µ–Ω–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –Ω–∞–º –Ω–∞–¥–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É –≤—Å–µ—Ö –∫–Ω–∏–≥ –≤ —Å—Ç–æ–ª–±—Ü–µ **price** c –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ```AVG``` –∏ –æ–∫—Ä—É–≥–ª–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ
2-—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ```ROUND```. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å, –º—ã –µ–≥–æ –ø–∏—à–µ–º —Ç–∞–∫–∂–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å —Ç–µ–º –∂–µ
—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º, —Ç–æ–ª—å–∫–æ –∑–∞–∫–ª—é—á–∞–µ–º –µ–≥–æ –≤ —Å–∫–æ–±–∫–∏ (–∏ **–Ω–µ —Å—Ç–∞–≤–∏–º** –≤ –∫–æ–Ω—Ü–µ —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ **;**). –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –Ω–∞ –µ–≥–æ –º–µ—Å—Ç–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —Ü–µ–Ω —Å —ç—Ç–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º

*–í–ª–æ–∂–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å*:

```SQL
SELECT ROUND(AVG(price),2)
FROM book
```

*–í—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (—É—Å–ª–æ–≤–Ω–∞—è) –ø–æ—Å–ª–µ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –≥–¥–µ –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç—Å—è –ª–∏ —É—Å–ª–æ–≤–∏–µ ```price <= ROUND(AVG(price),2)```:*

```SQL
+---------+-----------------------+------------------+--------+--------+---------------------+
| book_id | title                 | author           | price  | amount | ROUND(AVG(price),2) |
+---------+-----------------------+------------------+--------+--------+---------------------+
| 1       | –ú–∞—Å—Ç–µ—Ä –∏ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞    | –ë—É–ª–≥–∞–∫–æ–≤ –ú.–ê.    | 670.99 | 3      | 600.17              |
| 2       | –ë–µ–ª–∞—è –≥–≤–∞—Ä–¥–∏—è         | –ë—É–ª–≥–∞–∫–æ–≤ –ú.–ê.    | 540.50 | 5      | 600.17              |
| 3       | –ò–¥–∏–æ—Ç                 | –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | 460.00 | 10     | 600.17              |
| 4       | –ë—Ä–∞—Ç—å—è –ö–∞—Ä–∞–º–∞–∑–æ–≤—ã     | –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | 799.01 | 3      | 600.17              |
| 5       | –ò–≥—Ä–æ–∫                 | –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | 480.50 | 10     | 600.17              |
| 6       | –°—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏—è –∏ –ø–æ—ç–º—ã | –ï—Å–µ–Ω–∏–Ω –°.–ê.      | 650.00 | 15     | 600.17              |
+---------+-----------------------+------------------+--------+--------+---------------------+
```

–ï—Å–ª–∏ ```price``` –≤ —Å—Ç—Ä–æ–∫–µ <= 600.17, —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–ª–µ–¥—É—é—â—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É:

```SQL
+------------------+---------------+--------+
| author           | title         | price  |
+------------------+---------------+--------+
| –ë—É–ª–≥–∞–∫–æ–≤ –ú.–ê.    | –ë–µ–ª–∞—è –≥–≤–∞—Ä–¥–∏—è | 540.50 |
| –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | –ò–¥–∏–æ—Ç         | 460.00 |
| –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | –ò–≥—Ä–æ–∫         | 480.50 |
+------------------+---------------+--------+
Affected rows: 3
```

–ò —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ—Ç –≤–∏–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–º —É–∂–µ –≤—ã–¥–∞—ë—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```SQL
+------------------+---------------+--------+
| author           | title         | price  |
+------------------+---------------+--------+
| –ë—É–ª–≥–∞–∫–æ–≤ –ú.–ê.    | –ë–µ–ª–∞—è –≥–≤–∞—Ä–¥–∏—è | 540.50 |
| –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | –ò–≥—Ä–æ–∫         | 480.50 |
| –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π –§.–ú. | –ò–¥–∏–æ—Ç         | 460.00 |
+------------------+---------------+--------+
Affected rows: 3
```
