### Оглавление:
1. [Основные принципы реляционных баз данных](#Основные-принципы-реляционных-баз-данных)
2. [Выбор типов данных для полей](#Выбор-типов-данных-для-полей)
3. [Создание таблицы](#Создание-таблицы)
4. [Вставка записи в таблицу](#Вставка-записи-в-таблицу)

## Основные принципы реляционных баз данных:

- все данные на концептуальном уровне представляются в виде объектов, заданных в виде строк и столбцов, называемых отношением, более распространенное название – таблица;
- в пересечение строки и столбца таблицы можно занести только одно значение;
- все операции выполняются над целыми отношениями и результатом этих операций является отношение.

Пример отношения:

[![s1.jpg](https://i.postimg.cc/qRY41N0Z/s1.jpg)](https://postimg.cc/r0SBmFDS)

На примере таблицы **Сотрудник** рассмотрим терминологию реляционных баз данных:

- **отношение**  – это структура данных целиком, набор записей (в обычном понимании – таблица) , в  примере –это Сотрудник;
- **кортеж** – это каждая строка , содержащая данные (более распространенный термин – запись ), например, <001, Борин С.А, 234-01-23, программист>, все кортежи в отношении должны быть различны;
- **мощность** – число кортежей в таблице (проще говоря, число записей), в данном случае 3, мощность отношения может быть любой (от 0 до бесконечности), порядок следования кортежей - неважен;
- **атрибут** – это столбец в таблице (более распространенный термин – поле ), в примере – Табельный номер, Фамилия И.О., Телефон, Должность) 
- **размерность** – это число атрибутов в таблице, в данном случае – 4;
- размерность отношения должна быть больше 0, порядок следования атрибутов существенен;
 - **домен атрибута** – это допустимые значения (неповторяющиеся), которые можно занести в поле , например для атрибута Должность домен – {инженер, программист}.

### Что такое таблица?

Данные в СУБД хранятся в объектах БД, называемых **таблицами (tables)**. Таблица, как правило, представляет собой коллекцию связанных между собой данных и состоит из определенного количества колонок и строк.


Таблица — это самая распространенная и простая форма хранения данных в РБД.

### Что такое поле?

Каждая таблица состоит из небольших частей — **полей (fields)**. Полями в таблице Сотрудник являются Табельный номер, Фамилия И.О., Телефон, и Должность. **Поле** — это колонка таблицы, предназначенная для хранения определенной информации о каждой записи в таблице.

### Что такое колонка?

**Колонка (column)** — это вертикальное вхождение в таблице, содержащее всю информацию, связанную с определенным полем. В таблице Сотрудник одной из колонок является Должность, содержащая должности, которые занимают сотрудники.

### Что такое запись или строка?

**Запись или строка (record/row)** — это любое единичное вхождение (entry), существующее в таблице. В таблице Сотрудник 3 записи. Проще говоря, запись — это горизонтальное вхождение в таблице.

[:arrow_up:Оглавление](#Оглавление)
___
## Отношение, реляционная модель
База данных, в том числе и реляционная, используется для формального описания  некоторой предметной области реального мира, например, склада, учебного процесса и пр. Обязательным этапом перед созданием базы данных является ее проектирование (этот процесс разбирается в следующих модулях).

В первом модуле будем рассматривать простейшие предметные области, информацию о которых можно описать в виде одной таблицы. Каждая такая таблица ассоциируется с неким информационным объектом или событием реального мира – человеком, документом, посещением и т.д. 

**Пример.**

Рассмотрим некоторый склад, на котором хранятся книги. Известно название книги, ее автор, количество экземпляров на складе и ее цена.

Всю эту информацию можно представить в виде таблицы, состоящей из 4 столбцов (приведено только 4 записи, на самом деле их значительно больше):

[![1.png](https://i.postimg.cc/NLqR38Ry/1.png)](https://postimg.cc/jncWN7gK)

Перед созданием таблицы в базе данных необходимо описать ее структуру. Для этого выполняется следующая последовательность шагов:

1. Дать таблице имя, пусть она будет называться **book**, вот некоторые ***правила для выбора имен таблиц***:

- может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы;
- имя должно быть уникальным в пределах базы данных.


Также **рекомендуется**:

- чтобы имя было существительным в единственном числе;
- имя должно быть понятным и соответствовать тому объекту, который оно описывает;
- имя должно быть как можно короче, максимум до 10 символов.


**Важно**. Имена таблиц являются регистрозависимыми из-за операционной системы на которой работает **stepik**, то есть имя **book** и **Book** – разные имена. Рекомендуется для записи имен таблиц использовать только строчные (маленькие) буквы.

2. Определить структуру таблицы, из каких атрибутов(столбцов, полей) она будет состоять,  в нашем случае это:

- **title** – поле для хранения названия книги;
- **author** – поле с фамилией автора книги ;
- **priсe** – цена книги;
- **amount** – количество книг.


***Правила по выбору имени поля информационного объекта***:

- может включать английские буквы, цифры и знак подчеркивания, должно начинаться с буквы;
- имя поля должно быть уникальным в пределах таблицы.


***Рекомендации по выбору имени поля информационного объекта***:

- имя должно быть понятным и соответствовать тем данным, которые хранятся в поле;
- имя может состоять из нескольких слов, тогда слова разделяются подчеркиванием, после подчеркивания слово пишется с маленькой буквы.

3. Включить ключевое поле **book_id**, которое является ОБЯЗАТЕЛЬНЫМ ЭЛЕМЕНТОМ каждой реляционной таблицы. Ключевое поле является уникальным для каждой записи, однозначно определяет запись и в дальнейшем будет использоваться для связей с другими таблицами.

***Рекомендации по именованию  ключевых полей***:

- имя должно состоять  из двух частей: начинаться с названия таблицы, которой поле принадлежит,   затем через подчеркивание необходимо указать **id**.

Таким образом, наша таблица **book** будет выглядеть следующим образом:

[![2.png](https://i.postimg.cc/qqf95YD2/2.png)](https://postimg.cc/475LK8g3)

## Выбор типов данных для полей 

После описания структуры таблицы необходимо выбрать типы данных для каждого поля. 

Каждая колонка, переменная и выражение в SQL имеют определенный тип данных (data type). 

Основные категории типов данных:

[![3.png](https://i.postimg.cc/mZwwqJnR/3.png)](https://postimg.cc/pymz5Gx1)

***Рекомендации по выбору типов данных для полей таблицы.***

- Выбирайте минимальный тип данных исходя из максимального значения поля. Например, если максимальный текст, который может быть записан в поле, имеет длину 25 символов, значит нужно использовать тип VARCHAR(25).
- Для описания ключевого поля используйте описание INT PRIMARY KEY AUTO_INCREMENT. Это значит, что в поле будут заноситься различные целые числа, при этом они будут автоматически генерироваться (каждая следующая строка будет иметь значение ключа на 1 больше предыдущего).

Определим тип данных для каждого поля таблицы **book**:

- **book_id** - ключевой столбец, целое число, которое должно генерироваться автоматически  - INT PRIMARY KEY AUTO_INCREMENT;
- **title** - строка текста, ее длина выбирается в зависимости от данных, которые предполагается хранить в поле, предположим, что название книги не превышает 50 символов - VARCHAR(50);
- **author** - строка текста - VARCHAR(30);
- **priсe** - для описание денежного значения используется числовой тип данных с двумя знаками после запятой - DECIMAL(8,2);
- **amount** - целое число - INT.

[:arrow_up:Оглавление](#Оглавление)
___
## Создание таблицы
Для создания таблицы используется SQL-запрос. В нём указывается какая таблица создается, из каких атрибутов(полей) она состоит и какой тип данных имеет каждое поле, при необходимости указывается описание полей (ключевое поле и т.д.). Его структура :

- ключевые слова : CREATE TABLE
- имя создаваемой таблицы;
- открывающая круглая скобка «(»;
- название поля и его описание, которое включает тип поля и другие необязательные характеристики;
запятая;
- название поля и его описание;
...
- закрывающая скобка «)».

**Пример**. Создадим таблицу **genre** следующей структуры:

[![4.png](https://i.postimg.cc/RF16D3vd/4.png)](https://postimg.cc/Q9tdBd9K)

*Запрос:*

```sql
CREATE TABLE genre(
    genre_id INT PRIMARY KEY AUTO_INCREMENT, 
    name_genre VARCHAR(30)
);
```
Созданная таблица - пустая.

***Рекомендации по записи SQL-запроса***

- Ключевые слова: SQL не является регистрозависимым языком (CREATE и create - одно и тоже ключевое слово). 
- Ключевые слова SQL и типы данных рекомендуется  записывать прописными (большими) буквами.
- Имена таблиц и полей - строчными (маленькими) буквами.
- SQL-запрос можно писать на нескольких строках.
- В конце SQL-запроса ставится точка с запятой (хотя если Вы пишете один запрос, это необязательно).
___
## Вставка записи в таблицу
Для занесения новой записи в таблицу используется SQL запрос, в котором указывается в какую таблицу, в какие поля заносить новые значения.

Используется команда INSERT, которая имеет следующий формальный синтаксис:

```sql
INSERT INTO имя_таблицы (список_столбцов) VALUES (значение1, значение2, ... значениеN)
```

**Структура запроса**:

- ключевые слова INSERT INTO (ключевое слово INTO можно пропустить);
- имя таблицы, в которую добавляется запись;
- открывающая круглая скобка «(»;
- список полей через запятую, в которые следует занести новые данные;
- закрывающая скобка «)»;
- ключевое слово VALUES;
- открывающая круглая скобка «(»;
- список значений через запятую, которые заносятся в соответствующие поля, при этом текстовые значения заключаются в кавычки, числовые значения записываются без кавычек, в качестве разделителя целой и дробной части используется точка;
- закрывающая скобка «)».


**Пример.** 

В **таблицу**, состоящую из двух столбцов добавим новую строку, при этом в **поле1** заносится **значение1**,  **в поле2** - **значение2**.

```sql
INSERT INTO таблица(поле1, поле2) 
VALUES (значение1, значение2);
```

В результате выполнения запроса новая запись заносится в конец обновляемой таблицы.


При составлении списка полей и списка значений необходимо учитывать следующее:

1. количество полей и количество значений в списках должны совпадать;
2. должно существовать прямое соответствие между позицией одного и того же элемента в обоих списках, поэтому первый элемент списка значений должен относиться к первому столбцу в списке столбцов, второй – ко второму столбцу и т.д.;
3. типы данных элементов в списке значений должны быть совместимы с типами данных соответствующих столбцов таблицы ( целое число можно занести в поле типа DECIMAL, обратная операция - недопустима);
4. новые значения нельзя добавлять в поля, описанные как PRIMARY KEY AUTO_INCREMENT;
5. рекомендуется заполнять все поля записи, если же поле пропущено, значение этого поля зависит от установленных по умолчанию значений, если значения не установлены - на данной платформе вставляется пустое значение (NULL).

**Пример**

Вставим новую запись в таблицу **genre**, созданную на предыдущем шаге ( в первых двух строках показана структура таблицы, далее - ее содержимое):

| genre_id                     | name_genre   |
|:-----------------------------|--------------|
|INT PRIMARY KEY AUTO_INCREMENT|VARCHAR(30)   |
|1                             |Роман         |

*Запрос:*

```sql
INSERT INTO genre (name_genre) 
VALUES ('Роман');
```

Заносится только значение поля name_genre, значение ключевого поля формируется автоматически.

[:arrow_up:Оглавление](#Оглавление)
