SQL позволяет не только выбирать данные из таблиц базы данных, но и корректировать информацию в них. 
Для этого используются запросы корректировки данных, с помощью которых можно:
- создать пустую таблицу;
- добавить в таблицу записи как совокупность значений;
- добавить записи из другой таблицы;
- добавить записи из другой таблицы, используя вложенный запрос;
- изменить значения в одном столбце;
- изменить значения в нескольких столбцах;
- изменить данные, используя несколько таблиц;
- удалить записи из таблицы;
- создать таблицу на основе данных других таблиц.


На данном уроке будут рассматриваться запросы для реализации типичных для склада действий:
- получение нового товара (добавление, обновление, удаление данных);
- продажа товара (обновление данных);
- формирование заказа на новый товар (создание таблицы).

### Оглавление
1. [Создание пустой таблицы](#Создание-пустой-таблицы)
2. [Добавление записей в таблицу](#Добавление-записей-в-таблицу)
3. [Добавление записей из другой таблицы](#Добавление-записей-из-другой-таблицы)
4. [Добавление записей, вложенные запросы](#Добавление-записей-вложенные-запросы)
5. [Запросы на обновление](#Запросы-на-обновление)
6. [Запросы на обновление нескольких столбцов](#Запросы-на-обновление-нескольких-столбцов)
7. [Запросы на обновление нескольких таблиц](#Запросы-на-обновление-нескольких-таблиц)
8. [Запросы на удаление](#Запросы-на-удаление)
9. [Запросы на создание таблицы](#Запросы-на-создание-таблицы)

## Создание пустой таблицы
Создание таблицы осуществляется с помощью запроса ```CREATE```

Здесь я просто повторю создание таблицы, рассматриваемое в [Модуле 1](https://github.com/Egessihora/SQL_RelationalDB/blob/master/Stepik/Modul_1_Основы%20реляционной%20модели%20и%20SQL/1.1%20Отношение%20(таблица)/Отношение%20(таблица)_Теория.md)

Для создания таблицы используется SQL-запрос. В нём указывается какая таблица создается, из каких атрибутов(полей) она состоит и какой тип данных имеет 
каждое поле, при необходимости указывается описание полей (ключевое поле и т.д.). Его структура :

- ключевые слова : ```CREATE TABLE```
- имя создаваемой таблицы;
- открывающая круглая скобка «(»;
- название поля и его описание, которое включает тип поля и другие необязательные характеристики;
запятая;
- название поля и его описание;
...
- закрывающая скобка «)».

**Пример**. Создадим таблицу **genre** следующей структуры:

[![4.png](https://i.postimg.cc/RF16D3vd/4.png)](https://postimg.cc/Q9tdBd9K)

*Запрос:*

```sql
CREATE TABLE genre(
    genre_id INT PRIMARY KEY AUTO_INCREMENT, 
    name_genre VARCHAR(30)
);
```
Созданная таблица создаётся пустой. Чтобы проверить, что таблица создана, можно сделать следующий запрос:

***Общий синтаксис запроса:***

```SQL
DESCRIBE table_name;
```

Запрос для таблицы **genre**:

```SQL
DESCRIBE genre;
```

Ключевое слово ```DESCRIBE``` возвращает основные сведения о метаданных таблицы. 
В результате запроса мы увидим имена столбцов, типы столбцов и комментарии к столбцам, которые мы прописали: 

```
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| genre_id   | int         | NO   | PRI | NULL    | auto_increment |
| name_genre | varchar(30) | YES  |     | NULL    |                |
+------------+-------------+------+-----+---------+----------------+
Affected rows: 2
```

***Рекомендации по записи SQL-запроса***

- Ключевые слова: SQL не является регистрозависимым языком (```CREATE``` и ```create``` - одно и тоже ключевое слово). 
- Ключевые слова SQL и типы данных рекомендуется  записывать прописными (большими) буквами.
- Имена таблиц и полей - строчными (маленькими) буквами.
- SQL-запрос можно писать на нескольких строках.
- В конце SQL-запроса ставится точка с запятой (хотя если Вы пишете один запрос, это необязательно).

[:arrow_up:Оглавление](#Оглавление)
___
## Добавление записей в таблицу
Сначала повторю то, что было в [Модуле 1](https://stepik.org/lesson/297508/step/9?unit=279268)

Для занесения новой записи в таблицу используется SQL запрос, в котором указывается в какую таблицу, в какие поля заносить новые значения.

Используется команда ```INSERT```, которая имеет следующий формальный синтаксис:

```sql
INSERT INTO имя_таблицы (список_столбцов) VALUES (значение1, значение2, ... значениеN)
```

**Структура запроса**:

- ключевые слова ```INSERT INTO``` (ключевое слово ```INTO``` можно пропустить);
- имя таблицы, в которую добавляется запись;
- открывающая круглая скобка «(»;
- список полей через запятую, в которые следует занести новые данные;
- закрывающая скобка «)»;
- ключевое слово ```VALUES```;
- открывающая круглая скобка «(»;
- список значений через запятую, которые заносятся в соответствующие поля, при этом текстовые значения заключаются в кавычки, числовые значения записываются без кавычек, в качестве разделителя целой и дробной части используется точка;
- закрывающая скобка «)».


**Пример.** 

В **таблицу**, состоящую из двух столбцов добавим новую строку, при этом в **поле1** заносится **значение1**,  **в поле2** - **значение2**.

```sql
INSERT INTO таблица(поле1, поле2) 
VALUES (значение1, значение2);
```

В результате выполнения запроса новая запись заносится в конец обновляемой таблицы.


При составлении списка полей и списка значений необходимо учитывать следующее:

1. количество полей и количество значений в списках должны совпадать;
2. должно существовать прямое соответствие между позицией одного и того же элемента в обоих списках, поэтому первый элемент списка значений должен относиться к первому столбцу в списке столбцов, второй – ко второму столбцу и т.д.;
3. типы данных элементов в списке значений должны быть совместимы с типами данных соответствующих столбцов таблицы ( целое число можно занести в поле типа ```DECIMAL```, обратная операция - недопустима);
4. новые значения нельзя добавлять в поля, описанные как ```PRIMARY KEY``` ```AUTO_INCREMENT```;
5. рекомендуется заполнять все поля записи, если же поле пропущено, значение этого поля зависит от установленных по умолчанию значений, если значения не установлены - на данной платформе вставляется пустое значение (```NULL```).

**Пример**

Вставим новую запись в таблицу **genre**, созданную на предыдущем шаге ( в первых двух строках показана структура таблицы, далее - ее содержимое):

| genre_id                     | name_genre   |
|------------------------------|--------------|
|INT PRIMARY KEY AUTO_INCREMENT|VARCHAR(30)   |
|1                             |Роман         |

*Запрос:*

```sql
INSERT INTO genre (name_genre) 
VALUES ('Роман');
```

Заносится только значение поля **name_genre**, значение ключевого поля формируется автоматически.

Чтобы посмотреть результат, отправляем запрос ```SELECT * FROM genre;```

```SQL
+----------+-------------+
| genre_id | name_genre  |
+----------+-------------+
|        1 | Роман       |
+----------+-------------+
```

[:arrow_up:Оглавление](#Оглавление)
___
